<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <!-- Hay que incluir los archivos CSS y JS de Leaflet -->
        <link
            rel="stylesheet"
            href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
            integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
            crossorigin=""
        />
        <script
            src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
            integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
            crossorigin=""
        ></script>
        <title>Mapa Leaflet</title>
    </head>
    <body>
        <h1>Ejemplo Leaflet</h1>

        <!-- Para crear un mapa con Leaflet, hay que crear un nuevo elemento HTML div donde se renderizará el mapa. Este div debe tener un tamaño definido (alto) para que el mapa se muestre correctamente. -->
        <div id="mapa" style="height: 500px"></div>

        <script>
            // Crear el mapa y centrarlo en unas coordenadas específicas con un nivel de zoom
            var map = L.map("mapa").setView([50.95, 6.98], 13);
            // Añadir una capa de mapa base (aquí usamos OpenStreetMap)
            L.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png", {
                maxZoom: 19,
                attribution:
                    '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>',
            }).addTo(map);

            // Añadir un marcador en una ubicación específica
            var marcadorCatedral = L.marker([50.941238, 6.956877]).addTo(
                map
            );

            // Añadir un círculo alrededor de la catedral
            var circuloCatedral = L.circle([50.941238, 6.956877], {
                color: "red",
                fillColor: "cyan",
                fillOpacity: 0.4,
                radius: 200,
            }).addTo(map);

            // Manejar eventos de clic en el mapa para dibujar un polígono
            let poligono = L.polygon([]).addTo(map);
            let puntos = [];
            function onMapClick(e) {
                puntos.push(e.latlng);
                // L.marker(e.latlng).addTo(map);
                map.removeLayer(poligono);
                poligono = L.polygon(puntos, { color: "blue" }).addTo(map);
            }



            map.on("click", onMapClick);


        </script>
    </body>
</html>
